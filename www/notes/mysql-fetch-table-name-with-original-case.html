<!DOCTYPE html><html><head><meta charset="utf8"><title>MySQL fetch table name with original case</title><meta name="description" content="Notes about code and among other things."><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="author" content="undefined"><link href="https://plus.google.com/109985810023249441310/posts" rel="publisher"><link rel="shortcut icon" href="/favicon.ico"><link rel="stylesheet" type="text/css" href="/css/main.css?v=1.3"><script>var SITE_VERSION = '1.3';</script></head><body class="comfy-outfit notes"><div id="sitebar"><div class="container"><section><nav class="menu"><ul class="nav-links"><li><a href="/">home</a></li><li class="selected"><a href="/notes">notes</a></li><li><a href="/about">about</a></li></ul></nav></section></div></div><hr><main><div class="container"><section><article class="Post"><h1 class="Post-title">MySQL fetch table name with original case</h1><div class="Post-meta"><span class="Timestamp">Wednesday, February 14th, 2018</span><div class="Tags"><a href="/tags/mysql" class="Tag">mysql</a></div></div><p>MySQL provides a database with metadata and information about the server, such as list of all the tables in a database and columns data type.</p>
<p>Fetching a table information can be done with the following query:</p>
<pre rel="sql" class="editor editor-colors"><div class="line"><span class="source sql"><span class="keyword other DML sql"><span>SELECT</span></span><span> TABLE_NAME, ENGINE, TABLE_COLLATION</span></span></div><div class="line"><span class="source sql"><span class="keyword other DML sql"><span>FROM</span></span><span> </span><span class="constant other database-name sql"><span>INFORMATION_SCHEMA</span></span><span>.</span><span class="constant other table-name sql"><span>TABLES</span></span></span></div><div class="line"><span class="source sql"><span class="keyword other DML sql"><span>WHERE</span></span></span></div><div class="line"><span class="source sql"><span>  TABLE_SCHEMA </span><span class="keyword operator comparison sql"><span>=</span></span><span> </span><span class="string quoted double sql"><span class="punctuation definition string begin sql"><span>"</span></span><span>mydatabase"</span></span></span></div><div class="line"><span class="source sql"><span>  </span><span class="keyword other DML sql"><span>AND</span></span><span> TABLE_NAME </span><span class="keyword operator comparison sql"><span>=</span></span><span> </span><span class="string quoted double sql"><span class="punctuation definition string begin sql"><span>"</span></span><span>Products"</span></span></span></div></pre>
<p>Result:</p>
<pre rel="text" class="editor editor-colors"><div class="line"><span class="text plain"><span class="meta paragraph text"><span>+------------+--------+-----------------+</span></span></span></div><div class="line"><span class="text plain"><span class="meta paragraph text"><span>| TABLE_NAME | ENGINE | TABLE_COLLATION |</span></span></span></div><div class="line"><span class="text plain"><span class="meta paragraph text"><span>+------------+--------+-----------------+</span></span></span></div><div class="line"><span class="text plain"><span class="meta paragraph text"><span>| products   | InnoDB | utf8_general_ci |</span></span></span></div><div class="line"><span class="text plain"><span class="meta paragraph text"><span>+------------+--------+-----------------+</span></span></span></div></pre>
<p>This result is what we expected, the name, the engine and the collation. The problem comes when the table have uppercase letter, as the result always seems to be in lowercase.</p>
<p>I can't tell if this is a configuration issue or a mysql bug.</p>
<p>Making a the condition for table name twice solves the issue.</p>
<pre rel="sql" class="editor editor-colors"><div class="line"><span class="source sql"><span class="keyword other DML sql"><span>SELECT</span></span><span> TABLE_NAME, ENGINE, TABLE_COLLATION</span></span></div><div class="line"><span class="source sql"><span class="keyword other DML sql"><span>FROM</span></span><span> </span><span class="constant other database-name sql"><span>INFORMATION_SCHEMA</span></span><span>.</span><span class="constant other table-name sql"><span>TABLES</span></span></span></div><div class="line"><span class="source sql"><span class="keyword other DML sql"><span>WHERE</span></span></span></div><div class="line"><span class="source sql"><span>  TABLE_SCHEMA </span><span class="keyword operator comparison sql"><span>=</span></span><span> </span><span class="string quoted double sql"><span class="punctuation definition string begin sql"><span>"</span></span><span>mydatabase"</span></span></span></div><div class="line"><span class="source sql"><span>  </span><span class="keyword other DML sql"><span>AND</span></span><span> (</span></span></div><div class="line"><span class="source sql"><span>    TABLE_NAME </span><span class="keyword operator comparison sql"><span>=</span></span><span> </span><span class="string quoted double sql"><span class="punctuation definition string begin sql"><span>"</span></span><span>Products"</span></span></span></div><div class="line"><span class="source sql"><span>    </span><span class="keyword other DML sql"><span>OR</span></span><span> TABLE_NAME </span><span class="keyword operator comparison sql"><span>=</span></span><span> </span><span class="string quoted double sql"><span class="punctuation definition string begin sql"><span>"</span></span><span>Products"</span></span></span></div><div class="line"><span class="source sql"><span>  )</span></span></div></pre>
<p>The query above will result with the table name in the original case it was created.</p>
<pre rel="text" class="editor editor-colors"><div class="line"><span class="text plain"><span class="meta paragraph text"><span>+------------+--------+-----------------+</span></span></span></div><div class="line"><span class="text plain"><span class="meta paragraph text"><span>|&nbsp;TABLE_NAME&nbsp;|&nbsp;ENGINE&nbsp;|&nbsp;TABLE_COLLATION&nbsp;|</span></span></span></div><div class="line"><span class="text plain"><span class="meta paragraph text"><span>+------------+--------+-----------------+</span></span></span></div><div class="line"><span class="text plain"><span class="meta paragraph text"><span>|&nbsp;Products&nbsp;&nbsp;&nbsp;|&nbsp;InnoDB&nbsp;|&nbsp;utf8_general_ci&nbsp;|</span></span></span></div><div class="line"><span class="text plain"><span class="meta paragraph text"><span>+------------+--------+-----------------+</span></span></span></div></pre></article></section></div></main><hr><footer id="footer"><div class="container"><section><ul><li><span class="copyright">Copyright &copy; 2018</span></li><li><a href="/about" class="link-about">About</a></li><li><a href="https://twitter.com/WellingGuzman" class="link-twitter">Twitter</a></li><li><a href="https://github.com/WellingGuzman" class="link-github">GitHub</a></li></ul></section></div></footer><script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','//www.google-analytics.com/analytics.js','ga');
ga('create', 'UA-37732822-1', 'auto');
ga('send', 'pageview');</script></body></html>