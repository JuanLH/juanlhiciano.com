<!DOCTYPE html><html><head><meta charset="utf8"><title>Control WordPress 404 Error</title><meta name="description" content="Notes about code and among other things."><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="author" content="undefined"><link href="https://plus.google.com/109985810023249441310/posts" rel="publisher"><link rel="shortcut icon" href="/favicon.ico"><link rel="stylesheet" type="text/css" href="/css/main.css?v=1.3"><script>var SITE_VERSION = '1.3';</script></head><body class="comfy-outfit notes"><div id="sitebar"><div class="container"><section><nav class="menu"><ul class="nav-links"><li><a href="/">home</a></li><li class="selected"><a href="/notes">notes</a></li><li><a href="/about">about</a></li></ul></nav></section></div></div><hr><main><div class="container"><section><article class="Post"><h1 class="Post-title">Control WordPress 404 Error</h1><div class="Post-meta"><span class="Timestamp">Tuesday, January 21st, 2014</span><div class="Tags"><a href="/tags/php" class="Tag">php</a><a href="/tags/wordpress" class="Tag">wordpress</a></div></div><p>I have site built with Wordpress and I wanted to catch all 404 page that Wordpress try to display and make my own custom 404 page depending on the requested page, or in fact I just wanted to whether or not show a 404 page.</p>

<!-- more -->
<p>If the user, let's say, go to <code><a href="http://mysite.com/someword">http://mysite.com/someword</a></code> on mysite, and if that is not a post/page it would probably display a 404 page, but I didn't want that behavior I wanted to search if <code>someword</code> is a category slug or a tag and display posts in that category or tag, otherwise would show the normal 404 page.</p>

<p>So, this is what I did, I added a action to <code>template_redirect</code> hook, that is executed before WordPress determine which page is going to be loaded.</p>

<pre rel="php" class="editor editor-colors"><div class="line"><span class="text html php"><span class="meta embedded block php"><span class="punctuation section embedded begin php"><span><?php</span></span></span></span></div><div class="line"><span class="text html php"><span class="meta embedded block php"><span class="source php"><span class="meta function-call php"><span>add_action</span></span><span>(</span><span class="string quoted single php"><span class="punctuation definition string begin php"><span>'</span></span><span class="meta string-contents quoted single php"><span>template_redirect</span></span><span class="punctuation definition string end php"><span>'</span></span></span><span>, </span><span class="string quoted single php"><span class="punctuation definition string begin php"><span>'</span></span><span class="meta string-contents quoted single php"><span>_custom_redirect</span></span><span class="punctuation definition string end php"><span>'</span></span></span><span>)</span><span class="punctuation terminator expression php"><span>;</span></span></span></span></span></div><div class="line"><span class="text html php"><span class="meta embedded block php"><span class="source php"><span class="meta function php"><span class="storage type function php"><span>function</span></span><span> </span><span class="entity name function php"><span>_custom_redirect</span></span><span class="punctuation definition parameters begin php"><span>(</span></span><span class="punctuation definition parameters end php"><span>)</span></span></span></span></span></span></div><div class="line"><span class="text html php"><span class="meta embedded block php"><span class="source php"><span class="punctuation section scope begin php"><span>{</span></span></span></span></span></div><div class="line"><span class="text html php"><span class="meta embedded block php"><span class="source php"><span>  </span><span class="storage modifier php"><span>global</span></span><span> </span><span class="variable other php"><span class="punctuation definition variable php"><span>$</span></span><span>wp_query</span></span><span class="punctuation terminator expression php"><span>;</span></span></span></span></span></div><div class="line"><span class="text html php"><span class="meta embedded block php"><span class="source php"><span> </span></span></span></span></div><div class="line"><span class="text html php"><span class="meta embedded block php"><span class="source php"><span>  </span><span class="keyword control php"><span>if</span></span><span> ( </span><span class="variable other php"><span class="punctuation definition variable php"><span>$</span></span><span>wp_query</span></span><span class="keyword operator class php"><span>-></span></span><span class="meta function-call object php"><span>is_404</span></span><span>(</span><span>) )</span></span></span></span></div><div class="line"><span class="text html php"><span class="meta embedded block php"><span class="source php"><span>  </span><span class="punctuation section scope begin php"><span>{</span></span></span></span></span></div><div class="line"><span class="text html php"><span class="meta embedded block php"><span class="source php"><span class="punctuation whitespace comment leading php"><span>    </span></span><span class="comment line double-slash php"><span class="punctuation definition comment php"><span>//</span></span><span> Here I take over 404 page</span><span> </span></span></span></span></span></div><div class="line"><span class="text html php"><span class="meta embedded block php"><span class="source php"><span>  </span><span class="punctuation section scope end php"><span>}</span></span></span></span></span></div><div class="line"><span class="text html php"><span class="meta embedded block php"><span class="source php"><span class="punctuation section scope end php"><span>}</span></span></span></span></span></div></pre>
<p>So now, I know when it's a 404 page, I need to get the string it was passed on the url, in this case <code>someword</code>, so I can check if the string match a category or a tag name with that name.</p>

<p>This string is stored in a array named <code>query_vars</code> with the key <code>name</code>. <code>query_vars</code> is a variable member of <code>WP_Query</code> which WordPress uses to execute the main query.</p>

<pre rel="php" class="editor editor-colors"><div class="line"><span class="text html php"><span class="meta embedded block php"><span class="punctuation section embedded begin php"><span><?php</span></span></span></span></div><div class="line"><span class="text html php"><span class="meta embedded block php"><span class="source php"><span class="meta function-call php"><span>add_action</span></span><span>(</span><span class="string quoted single php"><span class="punctuation definition string begin php"><span>'</span></span><span class="meta string-contents quoted single php"><span>template_redirect</span></span><span class="punctuation definition string end php"><span>'</span></span></span><span>, </span><span class="string quoted single php"><span class="punctuation definition string begin php"><span>'</span></span><span class="meta string-contents quoted single php"><span>_custom_redirect</span></span><span class="punctuation definition string end php"><span>'</span></span></span><span>)</span><span class="punctuation terminator expression php"><span>;</span></span></span></span></span></div><div class="line"><span class="text html php"><span class="meta embedded block php"><span class="source php"><span class="meta function php"><span class="storage type function php"><span>function</span></span><span> </span><span class="entity name function php"><span>_custom_redirect</span></span><span class="punctuation definition parameters begin php"><span>(</span></span><span class="punctuation definition parameters end php"><span>)</span></span></span></span></span></span></div><div class="line"><span class="text html php"><span class="meta embedded block php"><span class="source php"><span class="punctuation section scope begin php"><span>{</span></span></span></span></span></div><div class="line"><span class="text html php"><span class="meta embedded block php"><span class="source php"><span>  </span><span class="storage modifier php"><span>global</span></span><span> </span><span class="variable other php"><span class="punctuation definition variable php"><span>$</span></span><span>wp_query</span></span><span class="punctuation terminator expression php"><span>;</span></span></span></span></span></div><div class="line"><span class="text html php"><span class="meta embedded block php"><span class="source php"><span> </span></span></span></span></div><div class="line"><span class="text html php"><span class="meta embedded block php"><span class="source php"><span>  </span><span class="keyword control php"><span>if</span></span><span> ( </span><span class="variable other php"><span class="punctuation definition variable php"><span>$</span></span><span>wp_query</span></span><span class="keyword operator class php"><span>-></span></span><span class="meta function-call object php"><span>is_404</span></span><span>(</span><span>) )</span></span></span></span></div><div class="line"><span class="text html php"><span class="meta embedded block php"><span class="source php"><span>  </span><span class="punctuation section scope begin php"><span>{</span></span></span></span></span></div><div class="line"><span class="text html php"><span class="meta embedded block php"><span class="source php"><span>    </span><span class="variable other php"><span class="punctuation definition variable php"><span>$</span></span><span>page_name</span></span><span> </span><span class="keyword operator assignment php"><span>=</span></span><span> </span><span class="variable other php"><span class="punctuation definition variable php"><span>$</span></span><span>wp_query</span></span><span class="keyword operator class php"><span>-></span></span><span class="variable other property php"><span>query_vars</span></span><span class="punctuation section array begin php"><span>[</span></span><span class="string quoted single php"><span class="punctuation definition string begin php"><span>'</span></span><span class="meta string-contents quoted single php"><span>name</span></span><span class="punctuation definition string end php"><span>'</span></span></span><span class="punctuation section array end php"><span>]</span></span><span class="punctuation terminator expression php"><span>;</span></span></span></span></span></div><div class="line"><span class="text html php"><span class="meta embedded block php"><span class="source php"><span> </span></span></span></span></div><div class="line"><span class="text html php"><span class="meta embedded block php"><span class="source php"><span>    </span><span class="keyword control php"><span>if</span></span><span> ( </span><span class="keyword operator logical php"><span>!</span></span><span> </span><span class="variable other php"><span class="punctuation definition variable php"><span>$</span></span><span>page_name</span></span><span> )</span></span></span></span></div><div class="line"><span class="text html php"><span class="meta embedded block php"><span class="source php"><span>      </span><span class="keyword control php"><span>return</span></span><span class="punctuation terminator expression php"><span>;</span></span></span></span></span></div><div class="line"><span class="text html php"><span class="meta embedded block php"><span class="source php"><span> </span></span></span></span></div><div class="line"><span class="text html php"><span class="meta embedded block php"><span class="source php"><span>    </span><span class="keyword control php"><span>if</span></span><span> ( (</span><span class="variable other php"><span class="punctuation definition variable php"><span>$</span></span><span>category</span></span><span> </span><span class="keyword operator assignment php"><span>=</span></span><span>  </span><span class="meta function-call php"><span>get_category_by_slug</span></span><span>( </span><span class="variable other php"><span class="punctuation definition variable php"><span>$</span></span><span>page_name</span></span><span> )) )</span></span></span></span></div><div class="line"><span class="text html php"><span class="meta embedded block php"><span class="source php"><span>    </span><span class="punctuation section scope begin php"><span>{</span></span></span></span></span></div><div class="line"><span class="text html php"><span class="meta embedded block php"><span class="source php"><span class="punctuation whitespace comment leading php"><span>      </span></span><span class="comment line double-slash php"><span class="punctuation definition comment php"><span>//</span></span><span> Here it found a category</span><span> </span></span></span></span></span></div><div class="line"><span class="text html php"><span class="meta embedded block php"><span class="source php"><span>    </span><span class="punctuation section scope end php"><span>}</span></span></span></span></span></div><div class="line"><span class="text html php"><span class="meta embedded block php"><span class="source php"><span>    </span><span class="keyword control php"><span>elseif</span></span><span> ( (</span><span class="variable other php"><span class="punctuation definition variable php"><span>$</span></span><span>tag</span></span><span> </span><span class="keyword operator assignment php"><span>=</span></span><span> </span><span class="meta function-call php"><span>get_term_by</span></span><span>(</span><span class="string quoted single php"><span class="punctuation definition string begin php"><span>'</span></span><span class="meta string-contents quoted single php"><span>slug</span></span><span class="punctuation definition string end php"><span>'</span></span></span><span>, </span><span class="variable other php"><span class="punctuation definition variable php"><span>$</span></span><span>page_name</span></span><span>, </span><span class="string quoted single php"><span class="punctuation definition string begin php"><span>'</span></span><span class="meta string-contents quoted single php"><span>post_tag</span></span><span class="punctuation definition string end php"><span>'</span></span></span><span>) ) )</span></span></span></span></div><div class="line"><span class="text html php"><span class="meta embedded block php"><span class="source php"><span>    </span><span class="punctuation section scope begin php"><span>{</span></span></span></span></span></div><div class="line"><span class="text html php"><span class="meta embedded block php"><span class="source php"><span class="punctuation whitespace comment leading php"><span>      </span></span><span class="comment line double-slash php"><span class="punctuation definition comment php"><span>//</span></span><span> Here it found a tag</span><span> </span></span></span></span></span></div><div class="line"><span class="text html php"><span class="meta embedded block php"><span class="source php"><span>    </span><span class="punctuation section scope end php"><span>}</span></span></span></span></span></div><div class="line"><span class="text html php"><span class="meta embedded block php"><span class="source php"><span>    </span><span class="keyword control php"><span>else</span></span></span></span></span></div><div class="line"><span class="text html php"><span class="meta embedded block php"><span class="source php"><span>    </span><span class="punctuation section scope begin php"><span>{</span></span></span></span></span></div><div class="line"><span class="text html php"><span class="meta embedded block php"><span class="source php"><span class="punctuation whitespace comment leading php"><span>      </span></span><span class="comment line double-slash php"><span class="punctuation definition comment php"><span>//</span></span><span> Is not a category or a tag</span><span> </span></span></span></span></span></div><div class="line"><span class="text html php"><span class="meta embedded block php"><span class="source php"><span>      </span><span class="keyword control php"><span>return</span></span><span class="punctuation terminator expression php"><span>;</span></span></span></span></span></div><div class="line"><span class="text html php"><span class="meta embedded block php"><span class="source php"><span>    </span><span class="punctuation section scope end php"><span>}</span></span></span></span></span></div><div class="line"><span class="text html php"><span class="meta embedded block php"><span class="source php"><span>  </span><span class="punctuation section scope end php"><span>}</span></span></span></span></span></div><div class="line"><span class="text html php"><span class="meta embedded block php"><span class="source php"><span class="punctuation section scope end php"><span>}</span></span></span></span></span></div></pre>
<p>After this code WordPress would still "believe" it's a 404 page, I needed to add some more lines to changed this.</p>

<pre rel="php" class="editor editor-colors"><div class="line"><span class="text html php"><span class="meta embedded block php"><span class="punctuation section embedded begin php"><span><?php</span></span></span></span></div><div class="line"><span class="text html php"><span class="meta embedded block php"><span class="source php"><span class="meta function-call php"><span>add_action</span></span><span>(</span><span class="string quoted single php"><span class="punctuation definition string begin php"><span>'</span></span><span class="meta string-contents quoted single php"><span>template_redirect</span></span><span class="punctuation definition string end php"><span>'</span></span></span><span>, </span><span class="string quoted single php"><span class="punctuation definition string begin php"><span>'</span></span><span class="meta string-contents quoted single php"><span>_custom_redirect</span></span><span class="punctuation definition string end php"><span>'</span></span></span><span>)</span><span class="punctuation terminator expression php"><span>;</span></span></span></span></span></div><div class="line"><span class="text html php"><span class="meta embedded block php"><span class="source php"><span class="meta function php"><span class="storage type function php"><span>function</span></span><span> </span><span class="entity name function php"><span>_custom_redirect</span></span><span class="punctuation definition parameters begin php"><span>(</span></span><span class="punctuation definition parameters end php"><span>)</span></span></span></span></span></span></div><div class="line"><span class="text html php"><span class="meta embedded block php"><span class="source php"><span class="punctuation section scope begin php"><span>{</span></span></span></span></span></div><div class="line"><span class="text html php"><span class="meta embedded block php"><span class="source php"><span>  </span><span class="storage modifier php"><span>global</span></span><span> </span><span class="variable other php"><span class="punctuation definition variable php"><span>$</span></span><span>wp_query</span></span><span class="punctuation terminator expression php"><span>;</span></span></span></span></span></div><div class="line"><span class="text html php"><span class="meta embedded block php"><span class="source php"><span> </span></span></span></span></div><div class="line"><span class="text html php"><span class="meta embedded block php"><span class="source php"><span>  </span><span class="keyword control php"><span>if</span></span><span> ( </span><span class="variable other php"><span class="punctuation definition variable php"><span>$</span></span><span>wp_query</span></span><span class="keyword operator class php"><span>-></span></span><span class="meta function-call object php"><span>is_404</span></span><span>(</span><span>) )</span></span></span></span></div><div class="line"><span class="text html php"><span class="meta embedded block php"><span class="source php"><span>  </span><span class="punctuation section scope begin php"><span>{</span></span></span></span></span></div><div class="line"><span class="text html php"><span class="meta embedded block php"><span class="source php"><span>    </span><span class="variable other php"><span class="punctuation definition variable php"><span>$</span></span><span>page_name</span></span><span> </span><span class="keyword operator assignment php"><span>=</span></span><span> </span><span class="variable other php"><span class="punctuation definition variable php"><span>$</span></span><span>wp_query</span></span><span class="keyword operator class php"><span>-></span></span><span class="variable other property php"><span>query_vars</span></span><span class="punctuation section array begin php"><span>[</span></span><span class="string quoted single php"><span class="punctuation definition string begin php"><span>'</span></span><span class="meta string-contents quoted single php"><span>name</span></span><span class="punctuation definition string end php"><span>'</span></span></span><span class="punctuation section array end php"><span>]</span></span><span class="punctuation terminator expression php"><span>;</span></span></span></span></span></div><div class="line"><span class="text html php"><span class="meta embedded block php"><span class="source php"><span> </span></span></span></span></div><div class="line"><span class="text html php"><span class="meta embedded block php"><span class="source php"><span>    </span><span class="keyword control php"><span>if</span></span><span> ( </span><span class="keyword operator logical php"><span>!</span></span><span> </span><span class="variable other php"><span class="punctuation definition variable php"><span>$</span></span><span>page_name</span></span><span> )</span></span></span></span></div><div class="line"><span class="text html php"><span class="meta embedded block php"><span class="source php"><span>      </span><span class="keyword control php"><span>return</span></span><span class="punctuation terminator expression php"><span>;</span></span></span></span></span></div><div class="line"><span class="text html php"><span class="meta embedded block php"><span class="source php"><span> </span></span></span></span></div><div class="line"><span class="text html php"><span class="meta embedded block php"><span class="source php"><span>    </span><span class="keyword control php"><span>if</span></span><span> ( (</span><span class="variable other php"><span class="punctuation definition variable php"><span>$</span></span><span>category</span></span><span> </span><span class="keyword operator assignment php"><span>=</span></span><span>  </span><span class="meta function-call php"><span>get_category_by_slug</span></span><span>( </span><span class="variable other php"><span class="punctuation definition variable php"><span>$</span></span><span>page_name</span></span><span> )) )</span></span></span></span></div><div class="line"><span class="text html php"><span class="meta embedded block php"><span class="source php"><span>    </span><span class="punctuation section scope begin php"><span>{</span></span></span></span></span></div><div class="line"><span class="text html php"><span class="meta embedded block php"><span class="source php"><span class="punctuation whitespace comment leading php"><span>      </span></span><span class="comment line double-slash php"><span class="punctuation definition comment php"><span>//</span></span><span> Here it found a category</span><span> </span></span></span></span></span></div><div class="line"><span class="text html php"><span class="meta embedded block php"><span class="source php"><span>      </span><span class="variable other php"><span class="punctuation definition variable php"><span>$</span></span><span>wp_query</span></span><span class="keyword operator class php"><span>-></span></span><span class="variable other property php"><span>is_category</span></span><span> </span><span class="keyword operator assignment php"><span>=</span></span><span> </span><span class="constant language php"><span>true</span></span><span class="punctuation terminator expression php"><span>;</span></span></span></span></span></div><div class="line"><span class="text html php"><span class="meta embedded block php"><span class="source php"><span>    </span><span class="punctuation section scope end php"><span>}</span></span></span></span></span></div><div class="line"><span class="text html php"><span class="meta embedded block php"><span class="source php"><span>    </span><span class="keyword control php"><span>elseif</span></span><span> ( (</span><span class="variable other php"><span class="punctuation definition variable php"><span>$</span></span><span>tag</span></span><span> </span><span class="keyword operator assignment php"><span>=</span></span><span> </span><span class="meta function-call php"><span>get_term_by</span></span><span>(</span><span class="string quoted single php"><span class="punctuation definition string begin php"><span>'</span></span><span class="meta string-contents quoted single php"><span>slug</span></span><span class="punctuation definition string end php"><span>'</span></span></span><span>, </span><span class="variable other php"><span class="punctuation definition variable php"><span>$</span></span><span>page_name</span></span><span>, </span><span class="string quoted single php"><span class="punctuation definition string begin php"><span>'</span></span><span class="meta string-contents quoted single php"><span>post_tag</span></span><span class="punctuation definition string end php"><span>'</span></span></span><span>) ) )</span></span></span></span></div><div class="line"><span class="text html php"><span class="meta embedded block php"><span class="source php"><span>    </span><span class="punctuation section scope begin php"><span>{</span></span></span></span></span></div><div class="line"><span class="text html php"><span class="meta embedded block php"><span class="source php"><span class="punctuation whitespace comment leading php"><span>      </span></span><span class="comment line double-slash php"><span class="punctuation definition comment php"><span>//</span></span><span> Here it found a tag</span><span> </span></span></span></span></span></div><div class="line"><span class="text html php"><span class="meta embedded block php"><span class="source php"><span>      </span><span class="variable other php"><span class="punctuation definition variable php"><span>$</span></span><span>wp_query</span></span><span class="keyword operator class php"><span>-></span></span><span class="variable other property php"><span>is_tag</span></span><span> </span><span class="keyword operator assignment php"><span>=</span></span><span> </span><span class="constant language php"><span>true</span></span><span class="punctuation terminator expression php"><span>;</span></span></span></span></span></div><div class="line"><span class="text html php"><span class="meta embedded block php"><span class="source php"><span>    </span><span class="punctuation section scope end php"><span>}</span></span></span></span></span></div><div class="line"><span class="text html php"><span class="meta embedded block php"><span class="source php"><span>    </span><span class="keyword control php"><span>else</span></span></span></span></span></div><div class="line"><span class="text html php"><span class="meta embedded block php"><span class="source php"><span>    </span><span class="punctuation section scope begin php"><span>{</span></span></span></span></span></div><div class="line"><span class="text html php"><span class="meta embedded block php"><span class="source php"><span class="punctuation whitespace comment leading php"><span>      </span></span><span class="comment line double-slash php"><span class="punctuation definition comment php"><span>//</span></span><span> Is not a category or a tag</span><span> </span></span></span></span></span></div><div class="line"><span class="text html php"><span class="meta embedded block php"><span class="source php"><span>      </span><span class="keyword control php"><span>return</span></span><span class="punctuation terminator expression php"><span>;</span></span></span></span></span></div><div class="line"><span class="text html php"><span class="meta embedded block php"><span class="source php"><span>    </span><span class="punctuation section scope end php"><span>}</span></span></span></span></span></div><div class="line"><span class="text html php"><span class="meta embedded block php"><span class="source php"><span> </span></span></span></span></div><div class="line"><span class="text html php"><span class="meta embedded block php"><span class="source php"><span>    </span><span class="variable other php"><span class="punctuation definition variable php"><span>$</span></span><span>wp_query</span></span><span class="keyword operator class php"><span>-></span></span><span class="variable other property php"><span>is_404</span></span><span> </span><span class="keyword operator assignment php"><span>=</span></span><span> </span><span class="constant language php"><span>false</span></span><span class="punctuation terminator expression php"><span>;</span></span></span></span></span></div><div class="line"><span class="text html php"><span class="meta embedded block php"><span class="source php"><span>    </span><span class="meta function-call php"><span>status_header</span></span><span>( </span><span class="constant numeric php"><span>200</span></span><span> )</span><span class="punctuation terminator expression php"><span>;</span></span></span></span></span></div><div class="line"><span class="text html php"><span class="meta embedded block php"><span class="source php"><span>  </span><span class="punctuation section scope end php"><span>}</span></span></span></span></span></div><div class="line"><span class="text html php"><span class="meta embedded block php"><span class="source php"><span class="punctuation section scope end php"><span>}</span></span></span></span></span></div></pre>
<p>This is pretty much what I wanted to do, now I can get a <em>tag</em> or a <em>category</em> object if one exists, otherwise WordPress will keep its own process and will display its normal 404 page.</p>

<p>If I actually got a tag or category object, I need to query all posts under it.</p>

<pre rel="php" class="editor editor-colors"><div class="line"><span class="text html php"><span class="meta embedded block php"><span class="punctuation section embedded begin php"><span><?php</span></span></span></span></div><div class="line"><span class="text html php"><span class="meta embedded block php"><span class="source php"><span class="meta function-call php"><span>add_action</span></span><span>(</span><span class="string quoted single php"><span class="punctuation definition string begin php"><span>'</span></span><span class="meta string-contents quoted single php"><span>template_redirect</span></span><span class="punctuation definition string end php"><span>'</span></span></span><span>, </span><span class="string quoted single php"><span class="punctuation definition string begin php"><span>'</span></span><span class="meta string-contents quoted single php"><span>_custom_redirect</span></span><span class="punctuation definition string end php"><span>'</span></span></span><span>)</span><span class="punctuation terminator expression php"><span>;</span></span></span></span></span></div><div class="line"><span class="text html php"><span class="meta embedded block php"><span class="source php"><span class="meta function php"><span class="storage type function php"><span>function</span></span><span> </span><span class="entity name function php"><span>_custom_redirect</span></span><span class="punctuation definition parameters begin php"><span>(</span></span><span class="punctuation definition parameters end php"><span>)</span></span></span></span></span></span></div><div class="line"><span class="text html php"><span class="meta embedded block php"><span class="source php"><span class="punctuation section scope begin php"><span>{</span></span></span></span></span></div><div class="line"><span class="text html php"><span class="meta embedded block php"><span class="source php"><span>  </span><span class="storage modifier php"><span>global</span></span><span> </span><span class="variable other php"><span class="punctuation definition variable php"><span>$</span></span><span>wp_query</span></span><span class="punctuation terminator expression php"><span>;</span></span></span></span></span></div><div class="line"><span class="text html php"><span class="meta embedded block php"><span class="source php"><span> </span></span></span></span></div><div class="line"><span class="text html php"><span class="meta embedded block php"><span class="source php"><span>  </span><span class="keyword control php"><span>if</span></span><span> ( </span><span class="variable other php"><span class="punctuation definition variable php"><span>$</span></span><span>wp_query</span></span><span class="keyword operator class php"><span>-></span></span><span class="meta function-call object php"><span>is_404</span></span><span>(</span><span>) )</span></span></span></span></div><div class="line"><span class="text html php"><span class="meta embedded block php"><span class="source php"><span>  </span><span class="punctuation section scope begin php"><span>{</span></span></span></span></span></div><div class="line"><span class="text html php"><span class="meta embedded block php"><span class="source php"><span>    </span><span class="variable other php"><span class="punctuation definition variable php"><span>$</span></span><span>page_name</span></span><span> </span><span class="keyword operator assignment php"><span>=</span></span><span> </span><span class="variable other php"><span class="punctuation definition variable php"><span>$</span></span><span>wp_query</span></span><span class="keyword operator class php"><span>-></span></span><span class="variable other property php"><span>query_vars</span></span><span class="punctuation section array begin php"><span>[</span></span><span class="string quoted single php"><span class="punctuation definition string begin php"><span>'</span></span><span class="meta string-contents quoted single php"><span>name</span></span><span class="punctuation definition string end php"><span>'</span></span></span><span class="punctuation section array end php"><span>]</span></span><span class="punctuation terminator expression php"><span>;</span></span></span></span></span></div><div class="line"><span class="text html php"><span class="meta embedded block php"><span class="source php"><span> </span></span></span></span></div><div class="line"><span class="text html php"><span class="meta embedded block php"><span class="source php"><span>    </span><span class="keyword control php"><span>if</span></span><span> ( </span><span class="keyword operator logical php"><span>!</span></span><span> </span><span class="variable other php"><span class="punctuation definition variable php"><span>$</span></span><span>page_name</span></span><span> )</span></span></span></span></div><div class="line"><span class="text html php"><span class="meta embedded block php"><span class="source php"><span>      </span><span class="keyword control php"><span>return</span></span><span class="punctuation terminator expression php"><span>;</span></span></span></span></span></div><div class="line"><span class="text html php"><span class="meta embedded block php"><span class="source php"><span> </span></span></span></span></div><div class="line"><span class="text html php"><span class="meta embedded block php"><span class="source php"><span>    </span><span class="variable other php"><span class="punctuation definition variable php"><span>$</span></span><span>query_args</span></span><span> </span><span class="keyword operator assignment php"><span>=</span></span><span> </span><span class="string quoted single php"><span class="punctuation definition string begin php"><span>'</span></span><span class="punctuation definition string end php"><span>'</span></span></span><span class="punctuation terminator expression php"><span>;</span></span></span></span></span></div><div class="line"><span class="text html php"><span class="meta embedded block php"><span class="source php"><span>    </span><span class="keyword control php"><span>if</span></span><span> ( (</span><span class="variable other php"><span class="punctuation definition variable php"><span>$</span></span><span>category</span></span><span> </span><span class="keyword operator assignment php"><span>=</span></span><span>  </span><span class="meta function-call php"><span>get_category_by_slug</span></span><span>( </span><span class="variable other php"><span class="punctuation definition variable php"><span>$</span></span><span>page_name</span></span><span> )) )</span></span></span></span></div><div class="line"><span class="text html php"><span class="meta embedded block php"><span class="source php"><span>    </span><span class="punctuation section scope begin php"><span>{</span></span></span></span></span></div><div class="line"><span class="text html php"><span class="meta embedded block php"><span class="source php"><span class="punctuation whitespace comment leading php"><span>      </span></span><span class="comment line double-slash php"><span class="punctuation definition comment php"><span>//</span></span><span> Here we found a category</span><span> </span></span></span></span></span></div><div class="line"><span class="text html php"><span class="meta embedded block php"><span class="source php"><span>      </span><span class="variable other php"><span class="punctuation definition variable php"><span>$</span></span><span>wp_query</span></span><span class="keyword operator class php"><span>-></span></span><span class="variable other property php"><span>is_category</span></span><span> </span><span class="keyword operator assignment php"><span>=</span></span><span> </span><span class="constant language php"><span>true</span></span><span class="punctuation terminator expression php"><span>;</span></span></span></span></span></div><div class="line"><span class="text html php"><span class="meta embedded block php"><span class="source php"><span>      </span><span class="variable other php"><span class="punctuation definition variable php"><span>$</span></span><span>query_args</span></span><span> </span><span class="keyword operator assignment php"><span>=</span></span><span> </span><span class="string quoted single php"><span class="punctuation definition string begin php"><span>'</span></span><span class="meta string-contents quoted single php"><span>category_name=</span></span><span class="punctuation definition string end php"><span>'</span></span></span><span> </span><span class="keyword operator string php"><span>.</span></span><span> </span><span class="variable other php"><span class="punctuation definition variable php"><span>$</span></span><span>category</span></span><span class="keyword operator class php"><span>-></span></span><span class="variable other property php"><span>slug</span></span><span class="punctuation terminator expression php"><span>;</span></span></span></span></span></div><div class="line"><span class="text html php"><span class="meta embedded block php"><span class="source php"><span>    </span><span class="punctuation section scope end php"><span>}</span></span></span></span></span></div><div class="line"><span class="text html php"><span class="meta embedded block php"><span class="source php"><span>    </span><span class="keyword control php"><span>elseif</span></span><span> ( (</span><span class="variable other php"><span class="punctuation definition variable php"><span>$</span></span><span>tag</span></span><span> </span><span class="keyword operator assignment php"><span>=</span></span><span> </span><span class="meta function-call php"><span>get_term_by</span></span><span>(</span><span class="string quoted single php"><span class="punctuation definition string begin php"><span>'</span></span><span class="meta string-contents quoted single php"><span>slug</span></span><span class="punctuation definition string end php"><span>'</span></span></span><span>, </span><span class="variable other php"><span class="punctuation definition variable php"><span>$</span></span><span>page_name</span></span><span>, </span><span class="string quoted single php"><span class="punctuation definition string begin php"><span>'</span></span><span class="meta string-contents quoted single php"><span>post_tag</span></span><span class="punctuation definition string end php"><span>'</span></span></span><span>) ) )</span></span></span></span></div><div class="line"><span class="text html php"><span class="meta embedded block php"><span class="source php"><span>    </span><span class="punctuation section scope begin php"><span>{</span></span></span></span></span></div><div class="line"><span class="text html php"><span class="meta embedded block php"><span class="source php"><span class="punctuation whitespace comment leading php"><span>      </span></span><span class="comment line double-slash php"><span class="punctuation definition comment php"><span>//</span></span><span> Here we found a tag</span><span> </span></span></span></span></span></div><div class="line"><span class="text html php"><span class="meta embedded block php"><span class="source php"><span>      </span><span class="variable other php"><span class="punctuation definition variable php"><span>$</span></span><span>wp_query</span></span><span class="keyword operator class php"><span>-></span></span><span class="variable other property php"><span>is_tag</span></span><span> </span><span class="keyword operator assignment php"><span>=</span></span><span> </span><span class="constant language php"><span>true</span></span><span class="punctuation terminator expression php"><span>;</span></span></span></span></span></div><div class="line"><span class="text html php"><span class="meta embedded block php"><span class="source php"><span>      </span><span class="variable other php"><span class="punctuation definition variable php"><span>$</span></span><span>query_args</span></span><span> </span><span class="keyword operator assignment php"><span>=</span></span><span> </span><span class="string quoted single php"><span class="punctuation definition string begin php"><span>'</span></span><span class="meta string-contents quoted single php"><span>tag=</span></span><span class="punctuation definition string end php"><span>'</span></span></span><span> </span><span class="keyword operator string php"><span>.</span></span><span> </span><span class="variable other php"><span class="punctuation definition variable php"><span>$</span></span><span>tag</span></span><span class="keyword operator class php"><span>-></span></span><span class="variable other property php"><span>slug</span></span><span class="punctuation terminator expression php"><span>;</span></span></span></span></span></div><div class="line"><span class="text html php"><span class="meta embedded block php"><span class="source php"><span>    </span><span class="punctuation section scope end php"><span>}</span></span></span></span></span></div><div class="line"><span class="text html php"><span class="meta embedded block php"><span class="source php"><span>    </span><span class="keyword control php"><span>else</span></span></span></span></span></div><div class="line"><span class="text html php"><span class="meta embedded block php"><span class="source php"><span>    </span><span class="punctuation section scope begin php"><span>{</span></span></span></span></span></div><div class="line"><span class="text html php"><span class="meta embedded block php"><span class="source php"><span class="punctuation whitespace comment leading php"><span>      </span></span><span class="comment line double-slash php"><span class="punctuation definition comment php"><span>//</span></span><span> Is not a category or a tag</span><span> </span></span></span></span></span></div><div class="line"><span class="text html php"><span class="meta embedded block php"><span class="source php"><span>      </span><span class="keyword control php"><span>return</span></span><span class="punctuation terminator expression php"><span>;</span></span></span></span></span></div><div class="line"><span class="text html php"><span class="meta embedded block php"><span class="source php"><span>    </span><span class="punctuation section scope end php"><span>}</span></span></span></span></span></div><div class="line"><span class="text html php"><span class="meta embedded block php"><span class="source php"><span> </span></span></span></span></div><div class="line"><span class="text html php"><span class="meta embedded block php"><span class="source php"><span>    </span><span class="variable other php"><span class="punctuation definition variable php"><span>$</span></span><span>wp_query</span></span><span class="keyword operator class php"><span>-></span></span><span class="variable other property php"><span>is_404</span></span><span> </span><span class="keyword operator assignment php"><span>=</span></span><span> </span><span class="constant language php"><span>false</span></span><span class="punctuation terminator expression php"><span>;</span></span></span></span></span></div><div class="line"><span class="text html php"><span class="meta embedded block php"><span class="source php"><span>    </span><span class="variable other php"><span class="punctuation definition variable php"><span>$</span></span><span>wp_query</span></span><span class="keyword operator class php"><span>-></span></span><span class="variable other property php"><span>is_archive</span></span><span> </span><span class="keyword operator assignment php"><span>=</span></span><span> </span><span class="constant language php"><span>true</span></span><span class="punctuation terminator expression php"><span>;</span></span></span></span></span></div><div class="line"><span class="text html php"><span class="meta embedded block php"><span class="source php"><span>    </span><span class="meta function-call php"><span>status_header</span></span><span>( </span><span class="constant numeric php"><span>200</span></span><span> )</span><span class="punctuation terminator expression php"><span>;</span></span></span></span></span></div><div class="line"><span class="text html php"><span class="meta embedded block php"><span class="source php"><span> </span></span></span></span></div><div class="line"><span class="text html php"><span class="meta embedded block php"><span class="source php"><span>    </span><span class="meta function-call php"><span>query_posts</span></span><span>( </span><span class="variable other php"><span class="punctuation definition variable php"><span>$</span></span><span>query_args</span></span><span> )</span><span class="punctuation terminator expression php"><span>;</span></span></span></span></span></div><div class="line"><span class="text html php"><span class="meta embedded block php"><span class="source php"><span>  </span><span class="punctuation section scope end php"><span>}</span></span></span></span></span></div><div class="line"><span class="text html php"><span class="meta embedded block php"><span class="source php"><span class="punctuation section scope end php"><span>}</span></span></span></span></span></div></pre>
<p>If <code>status_header( 200 );</code> isn't added the HTTP status will always be a 404, so this line change the status code from 404 to 200.</p>

<p>This is about it, but I want a little bit more, I want if <code>is_category();</code> or <code>is_tag();</code> functions are used, it has to return true. In order to make this to happen I needed to set a couple of variables more.</p>

<pre rel="php" class="editor editor-colors"><div class="line"><span class="text html php"><span class="meta embedded block php"><span class="punctuation section embedded begin php"><span><?php</span></span></span></span></div><div class="line"><span class="text html php"><span class="meta embedded block php"><span class="source php"><span class="variable other php"><span class="punctuation definition variable php"><span>$</span></span><span>wp_query</span></span><span class="keyword operator class php"><span>-></span></span><span class="meta function-call object php"><span>set</span></span><span>(</span><span class="string quoted single php"><span class="punctuation definition string begin php"><span>'</span></span><span class="meta string-contents quoted single php"><span>category_name</span></span><span class="punctuation definition string end php"><span>'</span></span></span><span>, </span><span class="variable other php"><span class="punctuation definition variable php"><span>$</span></span><span>category</span></span><span class="keyword operator class php"><span>-></span></span><span class="variable other property php"><span>slug</span></span><span>)</span><span class="punctuation terminator expression php"><span>;</span></span></span></span></span></div><div class="line"><span class="text html php"><span class="meta embedded block php"><span class="source php"><span class="variable other php"><span class="punctuation definition variable php"><span>$</span></span><span>wp_query</span></span><span class="keyword operator class php"><span>-></span></span><span class="meta function-call object php"><span>set</span></span><span>(</span><span class="string quoted single php"><span class="punctuation definition string begin php"><span>'</span></span><span class="meta string-contents quoted single php"><span>cat</span></span><span class="punctuation definition string end php"><span>'</span></span></span><span>, </span><span class="variable other php"><span class="punctuation definition variable php"><span>$</span></span><span>category</span></span><span class="keyword operator class php"><span>-></span></span><span class="variable other property php"><span>term_id</span></span><span>)</span><span class="punctuation terminator expression php"><span>;</span></span></span></span></span></div><div class="line"><span class="text html php"><span class="meta embedded block php"><span class="source php"><span> </span></span></span></span></div><div class="line"><span class="text html php"><span class="meta embedded block php"><span class="source php"><span class="variable other php"><span class="punctuation definition variable php"><span>$</span></span><span>wp_query</span></span><span class="keyword operator class php"><span>-></span></span><span class="meta function-call object php"><span>set</span></span><span>(</span><span class="string quoted single php"><span class="punctuation definition string begin php"><span>'</span></span><span class="meta string-contents quoted single php"><span>tag</span></span><span class="punctuation definition string end php"><span>'</span></span></span><span>, </span><span class="variable other php"><span class="punctuation definition variable php"><span>$</span></span><span>tag</span></span><span class="keyword operator class php"><span>-></span></span><span class="variable other property php"><span>slug</span></span><span>)</span><span class="punctuation terminator expression php"><span>;</span></span></span></span></span></div><div class="line"><span class="text html php"><span class="meta embedded block php"><span class="source php"><span class="variable other php"><span class="punctuation definition variable php"><span>$</span></span><span>wp_query</span></span><span class="keyword operator class php"><span>-></span></span><span class="meta function-call object php"><span>set</span></span><span>(</span><span class="string quoted single php"><span class="punctuation definition string begin php"><span>'</span></span><span class="meta string-contents quoted single php"><span>tag_id</span></span><span class="punctuation definition string end php"><span>'</span></span></span><span>, </span><span class="variable other php"><span class="punctuation definition variable php"><span>$</span></span><span>tag</span></span><span class="keyword operator class php"><span>-></span></span><span class="variable other property php"><span>term_id</span></span><span>)</span><span class="punctuation terminator expression php"><span>;</span></span></span></span></span></div></pre>
<p><code>$wp_query->set()</code> will set a variable to <code>query_vars</code> array, which as I mentioned before is used by WordPress main query. With this variables set, when WordPress executes <code>is_category();</code> or <code>is_tag();</code> would have category or tag specific variable values to check if is a category/tag or not. </p>

<h3>Final code</h3>

<pre rel="php" class="editor editor-colors"><div class="line"><span class="text html php"><span class="meta embedded block php"><span class="punctuation section embedded begin php"><span>&lt;?php</span></span></span></span></div><div class="line"><span class="text html php"><span class="meta embedded block php"><span class="source php"><span class="meta function-call php"><span>add_action</span></span><span>(</span><span class="string quoted single php"><span class="punctuation definition string begin php"><span>&#39;</span></span><span class="meta string-contents quoted single php"><span>template_redirect</span></span><span class="punctuation definition string end php"><span>&#39;</span></span></span><span>,&nbsp;</span><span class="string quoted single php"><span class="punctuation definition string begin php"><span>&#39;</span></span><span class="meta string-contents quoted single php"><span>_custom_redirect</span></span><span class="punctuation definition string end php"><span>&#39;</span></span></span><span>)</span><span class="punctuation terminator expression php"><span>;</span></span></span></span></span></div><div class="line"><span class="text html php"><span class="meta embedded block php"><span class="source php"><span class="meta function php"><span class="storage type function php"><span>function</span></span><span>&nbsp;</span><span class="entity name function php"><span>_custom_redirect</span></span><span class="punctuation definition parameters begin php"><span>(</span></span><span class="punctuation definition parameters end php"><span>)</span></span></span></span></span></span></div><div class="line"><span class="text html php"><span class="meta embedded block php"><span class="source php"><span class="punctuation section scope begin php"><span>{</span></span></span></span></span></div><div class="line"><span class="text html php"><span class="meta embedded block php"><span class="source php"><span>&nbsp;&nbsp;</span><span class="storage modifier php"><span>global</span></span><span>&nbsp;</span><span class="variable other php"><span class="punctuation definition variable php"><span>$</span></span><span>wp_query</span></span><span class="punctuation terminator expression php"><span>;</span></span></span></span></span></div><div class="line"><span class="text html php"><span class="meta embedded block php"><span class="source php"><span>&nbsp;</span></span></span></span></div><div class="line"><span class="text html php"><span class="meta embedded block php"><span class="source php"><span>&nbsp;&nbsp;</span><span class="keyword control php"><span>if</span></span><span>&nbsp;(&nbsp;</span><span class="variable other php"><span class="punctuation definition variable php"><span>$</span></span><span>wp_query</span></span><span class="keyword operator class php"><span>-&gt;</span></span><span class="meta function-call object php"><span>is_404</span></span><span>(</span><span>)&nbsp;)</span></span></span></span></div><div class="line"><span class="text html php"><span class="meta embedded block php"><span class="source php"><span>&nbsp;&nbsp;</span><span class="punctuation section scope begin php"><span>{</span></span></span></span></span></div><div class="line"><span class="text html php"><span class="meta embedded block php"><span class="source php"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="variable other php"><span class="punctuation definition variable php"><span>$</span></span><span>page_name</span></span><span>&nbsp;</span><span class="keyword operator assignment php"><span>=</span></span><span>&nbsp;</span><span class="variable other php"><span class="punctuation definition variable php"><span>$</span></span><span>wp_query</span></span><span class="keyword operator class php"><span>-&gt;</span></span><span class="variable other property php"><span>query_vars</span></span><span class="punctuation section array begin php"><span>[</span></span><span class="string quoted single php"><span class="punctuation definition string begin php"><span>&#39;</span></span><span class="meta string-contents quoted single php"><span>name</span></span><span class="punctuation definition string end php"><span>&#39;</span></span></span><span class="punctuation section array end php"><span>]</span></span><span class="punctuation terminator expression php"><span>;</span></span></span></span></span></div><div class="line"><span class="text html php"><span class="meta embedded block php"><span class="source php"><span>&nbsp;</span></span></span></span></div><div class="line"><span class="text html php"><span class="meta embedded block php"><span class="source php"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keyword control php"><span>if</span></span><span>&nbsp;(&nbsp;</span><span class="keyword operator logical php"><span>!</span></span><span>&nbsp;</span><span class="variable other php"><span class="punctuation definition variable php"><span>$</span></span><span>page_name</span></span><span>&nbsp;)</span></span></span></span></div><div class="line"><span class="text html php"><span class="meta embedded block php"><span class="source php"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keyword control php"><span>return</span></span><span class="punctuation terminator expression php"><span>;</span></span></span></span></span></div><div class="line"><span class="text html php"><span class="meta embedded block php"><span class="source php"><span>&nbsp;</span></span></span></span></div><div class="line"><span class="text html php"><span class="meta embedded block php"><span class="source php"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="variable other php"><span class="punctuation definition variable php"><span>$</span></span><span>query_args</span></span><span>&nbsp;</span><span class="keyword operator assignment php"><span>=</span></span><span>&nbsp;</span><span class="string quoted single php"><span class="punctuation definition string begin php"><span>&#39;</span></span><span class="punctuation definition string end php"><span>&#39;</span></span></span><span class="punctuation terminator expression php"><span>;</span></span></span></span></span></div><div class="line"><span class="text html php"><span class="meta embedded block php"><span class="source php"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keyword control php"><span>if</span></span><span>&nbsp;(&nbsp;(</span><span class="variable other php"><span class="punctuation definition variable php"><span>$</span></span><span>category</span></span><span>&nbsp;</span><span class="keyword operator assignment php"><span>=</span></span><span>&nbsp;&nbsp;</span><span class="meta function-call php"><span>get_category_by_slug</span></span><span>(&nbsp;</span><span class="variable other php"><span class="punctuation definition variable php"><span>$</span></span><span>page_name</span></span><span>&nbsp;))&nbsp;)</span></span></span></span></div><div class="line"><span class="text html php"><span class="meta embedded block php"><span class="source php"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="punctuation section scope begin php"><span>{</span></span></span></span></span></div><div class="line"><span class="text html php"><span class="meta embedded block php"><span class="source php"><span class="punctuation whitespace comment leading php"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></span><span class="comment line double-slash php"><span class="punctuation definition comment php"><span>//</span></span><span>&nbsp;Here&nbsp;we&nbsp;found&nbsp;a&nbsp;category</span><span>&nbsp;</span></span></span></span></span></div><div class="line"><span class="text html php"><span class="meta embedded block php"><span class="source php"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="variable other php"><span class="punctuation definition variable php"><span>$</span></span><span>wp_query</span></span><span class="keyword operator class php"><span>-&gt;</span></span><span class="variable other property php"><span>is_category</span></span><span>&nbsp;</span><span class="keyword operator assignment php"><span>=</span></span><span>&nbsp;</span><span class="constant language php"><span>true</span></span><span class="punctuation terminator expression php"><span>;</span></span></span></span></span></div><div class="line"><span class="text html php"><span class="meta embedded block php"><span class="source php"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="variable other php"><span class="punctuation definition variable php"><span>$</span></span><span>wp_query</span></span><span class="keyword operator class php"><span>-&gt;</span></span><span class="meta function-call object php"><span>set</span></span><span>(</span><span class="string quoted single php"><span class="punctuation definition string begin php"><span>&#39;</span></span><span class="meta string-contents quoted single php"><span>category_name</span></span><span class="punctuation definition string end php"><span>&#39;</span></span></span><span>,&nbsp;</span><span class="variable other php"><span class="punctuation definition variable php"><span>$</span></span><span>category</span></span><span class="keyword operator class php"><span>-&gt;</span></span><span class="variable other property php"><span>slug</span></span><span>)</span><span class="punctuation terminator expression php"><span>;</span></span></span></span></span></div><div class="line"><span class="text html php"><span class="meta embedded block php"><span class="source php"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="variable other php"><span class="punctuation definition variable php"><span>$</span></span><span>wp_query</span></span><span class="keyword operator class php"><span>-&gt;</span></span><span class="meta function-call object php"><span>set</span></span><span>(</span><span class="string quoted single php"><span class="punctuation definition string begin php"><span>&#39;</span></span><span class="meta string-contents quoted single php"><span>cat</span></span><span class="punctuation definition string end php"><span>&#39;</span></span></span><span>,&nbsp;</span><span class="variable other php"><span class="punctuation definition variable php"><span>$</span></span><span>category</span></span><span class="keyword operator class php"><span>-&gt;</span></span><span class="variable other property php"><span>term_id</span></span><span>)</span><span class="punctuation terminator expression php"><span>;</span></span></span></span></span></div><div class="line"><span class="text html php"><span class="meta embedded block php"><span class="source php"><span>&nbsp;</span></span></span></span></div><div class="line"><span class="text html php"><span class="meta embedded block php"><span class="source php"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="variable other php"><span class="punctuation definition variable php"><span>$</span></span><span>query_args</span></span><span>&nbsp;</span><span class="keyword operator assignment php"><span>=</span></span><span>&nbsp;</span><span class="string quoted single php"><span class="punctuation definition string begin php"><span>&#39;</span></span><span class="meta string-contents quoted single php"><span>category_name=</span></span><span class="punctuation definition string end php"><span>&#39;</span></span></span><span>&nbsp;</span><span class="keyword operator string php"><span>.</span></span><span>&nbsp;</span><span class="variable other php"><span class="punctuation definition variable php"><span>$</span></span><span>category</span></span><span class="keyword operator class php"><span>-&gt;</span></span><span class="variable other property php"><span>slug</span></span><span class="punctuation terminator expression php"><span>;</span></span></span></span></span></div><div class="line"><span class="text html php"><span class="meta embedded block php"><span class="source php"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="punctuation section scope end php"><span>}</span></span></span></span></span></div><div class="line"><span class="text html php"><span class="meta embedded block php"><span class="source php"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keyword control php"><span>elseif</span></span><span>&nbsp;(&nbsp;(</span><span class="variable other php"><span class="punctuation definition variable php"><span>$</span></span><span>tag</span></span><span>&nbsp;</span><span class="keyword operator assignment php"><span>=</span></span><span>&nbsp;</span><span class="meta function-call php"><span>get_term_by</span></span><span>(</span><span class="string quoted single php"><span class="punctuation definition string begin php"><span>&#39;</span></span><span class="meta string-contents quoted single php"><span>slug</span></span><span class="punctuation definition string end php"><span>&#39;</span></span></span><span>,&nbsp;</span><span class="variable other php"><span class="punctuation definition variable php"><span>$</span></span><span>page_name</span></span><span>,&nbsp;</span><span class="string quoted single php"><span class="punctuation definition string begin php"><span>&#39;</span></span><span class="meta string-contents quoted single php"><span>post_tag</span></span><span class="punctuation definition string end php"><span>&#39;</span></span></span><span>)&nbsp;)&nbsp;)</span></span></span></span></div><div class="line"><span class="text html php"><span class="meta embedded block php"><span class="source php"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="punctuation section scope begin php"><span>{</span></span></span></span></span></div><div class="line"><span class="text html php"><span class="meta embedded block php"><span class="source php"><span class="punctuation whitespace comment leading php"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></span><span class="comment line double-slash php"><span class="punctuation definition comment php"><span>//</span></span><span>&nbsp;Here&nbsp;we&nbsp;found&nbsp;a&nbsp;tag</span><span>&nbsp;</span></span></span></span></span></div><div class="line"><span class="text html php"><span class="meta embedded block php"><span class="source php"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="variable other php"><span class="punctuation definition variable php"><span>$</span></span><span>wp_query</span></span><span class="keyword operator class php"><span>-&gt;</span></span><span class="variable other property php"><span>is_tag</span></span><span>&nbsp;</span><span class="keyword operator assignment php"><span>=</span></span><span>&nbsp;</span><span class="constant language php"><span>true</span></span><span class="punctuation terminator expression php"><span>;</span></span></span></span></span></div><div class="line"><span class="text html php"><span class="meta embedded block php"><span class="source php"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="variable other php"><span class="punctuation definition variable php"><span>$</span></span><span>wp_query</span></span><span class="keyword operator class php"><span>-&gt;</span></span><span class="meta function-call object php"><span>set</span></span><span>(</span><span class="string quoted single php"><span class="punctuation definition string begin php"><span>&#39;</span></span><span class="meta string-contents quoted single php"><span>tag</span></span><span class="punctuation definition string end php"><span>&#39;</span></span></span><span>,&nbsp;</span><span class="variable other php"><span class="punctuation definition variable php"><span>$</span></span><span>tag</span></span><span class="keyword operator class php"><span>-&gt;</span></span><span class="variable other property php"><span>slug</span></span><span>)</span><span class="punctuation terminator expression php"><span>;</span></span></span></span></span></div><div class="line"><span class="text html php"><span class="meta embedded block php"><span class="source php"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="variable other php"><span class="punctuation definition variable php"><span>$</span></span><span>wp_query</span></span><span class="keyword operator class php"><span>-&gt;</span></span><span class="meta function-call object php"><span>set</span></span><span>(</span><span class="string quoted single php"><span class="punctuation definition string begin php"><span>&#39;</span></span><span class="meta string-contents quoted single php"><span>tag_id</span></span><span class="punctuation definition string end php"><span>&#39;</span></span></span><span>,&nbsp;</span><span class="variable other php"><span class="punctuation definition variable php"><span>$</span></span><span>tag</span></span><span class="keyword operator class php"><span>-&gt;</span></span><span class="variable other property php"><span>term_id</span></span><span>)</span><span class="punctuation terminator expression php"><span>;</span></span></span></span></span></div><div class="line"><span class="text html php"><span class="meta embedded block php"><span class="source php"><span>&nbsp;</span></span></span></span></div><div class="line"><span class="text html php"><span class="meta embedded block php"><span class="source php"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="variable other php"><span class="punctuation definition variable php"><span>$</span></span><span>query_args</span></span><span>&nbsp;</span><span class="keyword operator assignment php"><span>=</span></span><span>&nbsp;</span><span class="string quoted single php"><span class="punctuation definition string begin php"><span>&#39;</span></span><span class="meta string-contents quoted single php"><span>tag=</span></span><span class="punctuation definition string end php"><span>&#39;</span></span></span><span>&nbsp;</span><span class="keyword operator string php"><span>.</span></span><span>&nbsp;</span><span class="variable other php"><span class="punctuation definition variable php"><span>$</span></span><span>tag</span></span><span class="keyword operator class php"><span>-&gt;</span></span><span class="variable other property php"><span>slug</span></span><span class="punctuation terminator expression php"><span>;</span></span></span></span></span></div><div class="line"><span class="text html php"><span class="meta embedded block php"><span class="source php"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="punctuation section scope end php"><span>}</span></span></span></span></span></div><div class="line"><span class="text html php"><span class="meta embedded block php"><span class="source php"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keyword control php"><span>else</span></span></span></span></span></div><div class="line"><span class="text html php"><span class="meta embedded block php"><span class="source php"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="punctuation section scope begin php"><span>{</span></span></span></span></span></div><div class="line"><span class="text html php"><span class="meta embedded block php"><span class="source php"><span class="punctuation whitespace comment leading php"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></span><span class="comment line double-slash php"><span class="punctuation definition comment php"><span>//</span></span><span>&nbsp;Is&nbsp;not&nbsp;a&nbsp;category&nbsp;or&nbsp;a&nbsp;tag</span><span>&nbsp;</span></span></span></span></span></div><div class="line"><span class="text html php"><span class="meta embedded block php"><span class="source php"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keyword control php"><span>return</span></span><span class="punctuation terminator expression php"><span>;</span></span></span></span></span></div><div class="line"><span class="text html php"><span class="meta embedded block php"><span class="source php"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="punctuation section scope end php"><span>}</span></span></span></span></span></div><div class="line"><span class="text html php"><span class="meta embedded block php"><span class="source php"><span>&nbsp;</span></span></span></span></div><div class="line"><span class="text html php"><span class="meta embedded block php"><span class="source php"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="variable other php"><span class="punctuation definition variable php"><span>$</span></span><span>wp_query</span></span><span class="keyword operator class php"><span>-&gt;</span></span><span class="variable other property php"><span>is_404</span></span><span>&nbsp;</span><span class="keyword operator assignment php"><span>=</span></span><span>&nbsp;</span><span class="constant language php"><span>false</span></span><span class="punctuation terminator expression php"><span>;</span></span></span></span></span></div><div class="line"><span class="text html php"><span class="meta embedded block php"><span class="source php"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="variable other php"><span class="punctuation definition variable php"><span>$</span></span><span>wp_query</span></span><span class="keyword operator class php"><span>-&gt;</span></span><span class="variable other property php"><span>is_archive</span></span><span>&nbsp;</span><span class="keyword operator assignment php"><span>=</span></span><span>&nbsp;</span><span class="constant language php"><span>true</span></span><span class="punctuation terminator expression php"><span>;</span></span></span></span></span></div><div class="line"><span class="text html php"><span class="meta embedded block php"><span class="source php"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="meta function-call php"><span>status_header</span></span><span>(&nbsp;</span><span class="constant numeric php"><span>200</span></span><span>&nbsp;)</span><span class="punctuation terminator expression php"><span>;</span></span></span></span></span></div><div class="line"><span class="text html php"><span class="meta embedded block php"><span class="source php"><span>&nbsp;</span></span></span></span></div><div class="line"><span class="text html php"><span class="meta embedded block php"><span class="source php"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="meta function-call php"><span>query_posts</span></span><span>(&nbsp;</span><span class="variable other php"><span class="punctuation definition variable php"><span>$</span></span><span>query_args</span></span><span>&nbsp;)</span><span class="punctuation terminator expression php"><span>;</span></span></span></span></span></div><div class="line"><span class="text html php"><span class="meta embedded block php"><span class="source php"><span>&nbsp;&nbsp;</span><span class="punctuation section scope end php"><span>}</span></span></span></span></span></div><div class="line"><span class="text html php"><span class="meta embedded block php"><span class="source php"><span class="punctuation section scope end php"><span>}</span></span></span></span></span></div></pre>
<p>This would be helpful too if you want to log/register/email requested pages that ends up being a 404 page.</p>

<p><strong>NOTE:</strong> if you don't have any category or tag template page will returns a 404 page template, just take that in mind.</p></article></section></div></main><hr><footer id="footer"><div class="container"><section><ul><li><span class="copyright">Copyright &copy; 2014</span></li><li><a href="/about">About</a></li><li><a href="https://twitter.com/WellingGuzman">Twitter</a></li><li><a href="https://github.com/WellingGuzman">GitHub</a></li></ul></section></div></footer><script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','//www.google-analytics.com/analytics.js','ga');
ga('create', 'UA-37732822-1', 'auto');
ga('send', 'pageview');</script></body></html>