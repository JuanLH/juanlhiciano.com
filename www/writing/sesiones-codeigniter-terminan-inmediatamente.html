<!DOCTYPE html><html><head><meta charset="utf8"><meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"><title>Sesiones CodeIgniter terminan inmediatamente</title><meta name="description" content="Welling Guzman is a software engineer, and this is his writing in third person."><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="author" content="undefined"><link rel="shortcut icon" href="/favicon.ico"><link rel="stylesheet" type="text/css" href="/css/style.css?v=1.1"></head><body class="writing"><header id="header"><div class="Content-wrapper"><div class="sitebar"><a href="/" class="site-title"><span class="first">welling</span><span class="last">guzman</span></a><nav id="site-nav"><ul class="nav-links"><li><a href="/">home</a></li><li><a href="/writing">writing</a></li><li><a href="/about">about</a></li></ul></nav></div></div></header><div class="Heading"><div class="Content-wrapper"><h1 class="Header-title">Sesiones CodeIgniter terminan inmediatamente</h1><h4 class="Header-caption"><span class="Timestamp">January 19, 2013</span></h4></div></div><div class="Content"><div class="Content-wrapper"><article class="Article"><div class="Article-content"><p>He estado utilizando <strong>Codeigniter</strong> por mucho tiempo localmente y remotamente pero nunca me habia pasado algo como esto, tratando de utilizar las sesiones localmente funcionaban sin ningún problema, pero al utilizarlo en un servidor, las sesiones no querían funcionar, no querían almacenarse ni mantenerse su tiempo indicado en la configuración de CodeIgniter.</p>

<p><span id="more-36"></span></p>
<p>En <strong>CodeIgniter 2.1.3</strong> es la version que utilizo actualmente tiene por defecto estas configuraciones de sesión.</p>

<h2>Sesiones CodeIgniter</h2>

<p>
<pre class="php" rel="PHP" title="CodeIgniter - config.php">
<code>
$config[&#39;sess_cookie_name&#39;]    = &#39;ci_session&#39;;
$config[&#39;sess_expiration&#39;]    = 7200;
$config[&#39;sess_expire_on_close&#39;]    = FALSE;
$config[&#39;sess_encrypt_cookie&#39;]    = FALSE;
$config[&#39;sess_use_database&#39;]    = FALSE;
$config[&#39;sess_table_name&#39;]    = &#39;ci_sessions&#39;;
$config[&#39;sess_match_ip&#39;]    = FALSE;
$config[&#39;sess_match_useragent&#39;]    = TRUE;
$config[&#39;sess_time_to_update&#39;]    = 300;
</code>
</pre>
</p>

<p>Como podrán notar en <code>$config[&#39;sess_expiration&#39;]    = 7200;</code> nos indica que la session expirara después de 7200 segundos de ser creada, que resulta ser 2 horas, la cual se ira actualizando en cada ejecución y en fin el caso seria que si dura 2 horas (7200 segundos) inactiva expirara.</p>

<p>Esto me estaba funcionando perfectamente en mi servidor local hasta que trate de subirlo a un servidor remoto en la cual no encontraba cual seria el problema que no podia iniciar sesión, pense que el servidor no me estaba guardando o trabajando las sesiones pero si las almacenabas.</p>

<p>Investigando encontre el <em>problema</em> y la <em>solución</em>.</p>

<p><h2>Problema</h2></p>
<p>El problema estaba en que el servidor remoto estaba en un pais con diferencia de horario mayor a 2 horas a mi pais de residencia, la cual el problema funcionaba de esta manera:</p>
<ol>
<li>Iniciaba Sesión en la web a las 08:00am.</li>
<li>El servidor creaba las sesiones y le indicaba al navegador local que esta sesión expiran en 2 horas de su hora local que es 01:00am, la cual nos indica que la sesión habra terminado a las 03:00am si no la consultan antes de esta hora.</li>
<li>Cuando inmediatamente volvia a preguntar por la sesión que acaba de crear... ¡BANG! no funciona porque ya expiro a las 03:00am hace 5 horas según el servidor, según mi navegador (cliente local) no es nada cierto.</li>
</ol>
<h2>Solución</h2>
<p>
Pues la solución es bastante simple, Incrementar el tiempo de expiración de la sesión, la cual seria 1 dia, así no encontraríamos ningún problema con el servidor y el cliente. Hay ciertos países que tienen casi 1 dia de diferencia así que pueden variar o elegir el valor que prefieran.
</p><div class="Article-signature">—<a href="http://twitter.com/WellingGuzman">@WellingGuzman</a></div></div><div class="Article-footer"></div></article></div></div><footer id="footer"><div class="Content-wrapper"><div class="Site-footer-links"><a href="/about">About</a>•<a target="_blank" href="https://twitter.com/WellingGuzman">Twitter</a>•<a target="_blank" href="https://github.com/WellingGuzman">GitHub</a></div><div class="copyright">Copyright &copy; 2013&nbsp;<a href="https://plus.google.com/109985810023249441310/posts" rel="publisher">Welling Guzman</a></div></div></footer><script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','//www.google-analytics.com/analytics.js','ga');
ga('create', 'UA-37732822-1', 'auto');
ga('send', 'pageview');</script></body></html>